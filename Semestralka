// Online C++ compiler to run C++ program online
#include <iostream>
#include <map>
#include <vector>
#include <algorithm>
using namespace std;

class Matrix
{
    public:
    
    map <array<int, 2>, double> newmap;
    
    void set()
    {
    newmap[{1,1}]=11;
    newmap[{2,2}]=22;
    newmap[{3,3}]=33;
    newmap[{4,4}]=44;
    newmap[{5,5}]=55;
    newmap[{6,6}]=66;
    }

    void printed()
    {
    map <array<int, 2>, double>:: iterator itern=newmap.begin();
    
    for(int j=0; itern!=newmap.end(); itern++,j++)
    {
    cout<<itern->first[0]<<" "<<itern->first[1]<<" "<<itern->second<<endl;
    }    
    
    }
   
    
};

class Vektor
{
    
    public:
    map <int, double> newmap;

    void set()
    {
    newmap[1]=11;
    newmap[2]=22;
    newmap[3]=33;
    newmap[4]=44;
    newmap[5]=55;
    newmap[6]=66;
    }

    void printed()
    {
    map <int, double>:: iterator itern=newmap.begin();
    
    for(int j=0; itern!=newmap.end(); itern++,j++)
    {
    cout<<itern->first<<" "<<itern->second<<endl;
    }    
    
    }
   
        
};
    
Vektor nasobeni(Matrix a, Vektor b)
{
        Vektor c;
        
        map <array<int, 2>, double>:: iterator it=a.newmap.begin();
    
        double pom=0;
    
        for(int j=0; it!=a.newmap.end(); it++,j++)
        {
        pom=(it->second)*b.newmap[it->first[1]];
        c.newmap[it->first[0]]=pom;
        }    
        
    
        return c;
}
    
double nasobeni(Vektor a, Vektor b)
{
        double c=0;
        map <int, double>:: iterator it=a.newmap.begin();
        
        for(int j=0; it!=a.newmap.end(); it++,j++)
        {
        c=c+(it->second)*b.newmap[it->first];
        }
        return c;
        
}

Vektor nasobeni(double a, Vektor b)
{
        Vektor c;
        
        map <int, double>:: iterator it=b.newmap.begin();
    
        double pom=0;
    
        for(int j=0; it!=b.newmap.end(); it++,j++)
        {
        pom=a*(it->second);
        c.newmap[it->first]=pom;
        }    
        
    
        return c;
        
}


Vektor rozdil(Vektor a, Vektor b)
{
        Vektor c;
        
        
        map <int, double>:: iterator it1=a.newmap.begin();
        map <int, double>:: iterator it2=b.newmap.begin();
        
        vector <double> pom; //pomocny vektor prvku ktere se zucastnili operace
        double p; //pomocny prvek pro rozdil
  
        for(int j=0; it1!=a.newmap.end(); it1++,j++)
        {
            
        p=(it1->second)-b.newmap[it1->first];
        c.newmap[it1->first]=p;
        
        pom.push_back(it1->first);
        
        }    
        
        double key=0;    
        for(int j=0; it2!=b.newmap.end(); it2++,j++)
        {
    
        key=it2->first;
            if (find(pom.begin(), pom.end(), key) != pom.end()) {}
            else {c.newmap[it2->first]=-it2->second;}    
    
        }    

        
        return c;
}
Vektor soucet(Vektor a, Vektor b)
{
        Vektor c;
        
        
        map <int, double>:: iterator it1=a.newmap.begin();
        map <int, double>:: iterator it2=b.newmap.begin();
        
        vector <double> pom; //pomocny vektor prvku ktere se zucastnili operace
        double p; //pomocny prvek pro rozdil
  
        for(int j=0; it1!=a.newmap.end(); it1++,j++)
        {
            
        p=(it1->second)+b.newmap[it1->first];
        c.newmap[it1->first]=p;
        
        pom.push_back(it1->first);
        
        }    
        
        double key=0;    
        for(int j=0; it2!=b.newmap.end(); it2++,j++)
        {
    
        key=it2->first;
            if (find(pom.begin(), pom.end(), key) != pom.end()) {}
            else {c.newmap[it2->first]=it2->second;}    
    
        }    

        
        return c;
}

int main() {
    
    Matrix A;
    Vektor r,x0,p,z,x,b;
    double alfa,beta,lrr,rr;
    
    int n=9;
    /*
    Matrix m;
    m.set();
    m.printed();
    
    Vektor v;
    v.set();
    v.printed();
    
    Vektor c;
    c=nasobeni(m,v);
    c.printed();
    
    Vektor d;
    d=soucet(c,v);
    d.printed();
    
    double f;
    f=nasobeni(c,v);
    cout<<f<<endl;
    
    Vektor u;
    u=nasobeni(8,d);
    u.printed();
    */
    
    
    
  
    r=rozdil(b,nasobeni(A,x0));
    lrr=nasobeni(r,r);
    p=r;
    x=x0;
    
    for(int k=1; k<=n; k++)
    {
        z=nasobeni(A,p);
        alfa=rr/nasobeni(p,z);
        x=soucet(x,nasobeni(alfa,p)); // nasobeni vektoru cislem
        r=rozdil(r,nasobeni(alfa,z)); // soucet dvou vektoru
        if (r==nulovy_vektor) {break;}
        rr=nasobeni(r,r);
        beta=rr/lrr;
        lrr=rr;
        p=soucet(p,nasobeni(beta,p));
        
    }

    x.printed();
    
 
    
    return 0;
}
